  * [컴퓨터 관련 정보](%EC%BB%B4%ED%93%A8%ED%84%B0%20%EA%B4%80%EB%A0%A8%20%EC%A0%95%EB%B3%B4.md)  

## Contents

    

1. 개요 
2. 원리와 하는 이유 
3. 특징 
4. 유의점 
5. 기타 

[[edit](http://rigvedawiki.net/r1/wiki.php/%EB%94%94%EC%8A%A4%ED%81%AC%20%EC%A
1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C?action=edit&section=1)]

## 1. 개요 ¶

[하드디스크](%ED%95%98%EB%93%9C%EB%94%94%EC%8A%A4%ED%81%AC.md)
[최적화](%EC%B5%9C%EC%A0%81%ED%99%94.md)
[프로그램](%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8.md).

  

대부분의 [OS](OS.md)에 기본으로 구비된다.
[하드디스크](%ED%95%98%EB%93%9C%EB%94%94%EC%8A%A4%ED%81%AC.md)에
[파일](%ED%8C%8C%EC%9D%BC.md) 저장 시 동시작성, 동시입출력, 저장공간 부족 등 여러 요인으로 순차적으로 저장되지
않는 경우가 생긴다. 즉 파일 하나가 쪼개져 이곳저곳에 퍼지고, 이것을 파편화라고 한다. 해당 파일 실행 시 디스크가 쪼개진 조각들을 모두
찾아 읽어야 한다. 필요한 파일은 하나인데, 막상 읽을 때는 여러 파일 읽는 효과가 나니 실행 속도가 느려지는 것이다. 디스크 조각모음을
실행하면 프로그램이 디스크를 분석하여 쪼개진 파일을 한덩어리로 모은다.

  

OS 기본 프로그램이 아닌 전문적인 조각모음 프로그램은 어느 수준의 작업을 할지 정할 수 있다. 간단히는 가장 큰 조각을 그 자리에 둔 채
이리저리 흩어진 작은 조각들을 찾아서 붙이는 방식, 파일을 한덩이로 이어붙인 후 디렉토리와 파일명의 순서대로 정렬을 시키는 방식, 사용빈도가
높은 시스템 파일은 읽기 속도가 빠른 외측에 몰아놓는 방식 등 세세한 옵션이 있다.

  

조각난 파일이 많고 조각모음과 재정렬의 옵션이 높을수록 작업 시간이 길어지지만, 조각모음 프로그램에 따라서도 작업 시간이나 조각모음 효율에
큰 차이가 난다.

  

조각모음 시 종료할 수 있는 프로그램은 다 닫은 후에 실행해야 속도와 안정성에 좋다. 많은 프로그램이 작동할 때 HDD를 사용하고,
조각모음과 동시에 다른 프로그램을 구동하면 HDD의 부하가 높아지기 때문이다.

  

과거 하드디스크의 속도가 떨어지던 시절엔 [컴퓨터](%EC%BB%B4%ED%93%A8%ED%84%B0.md)의 속도를 좌지우지하는 요인
중 하나였다. 그러나 캐시 [메모리](%EB%A9%94%EB%AA%A8%EB%A6%AC.md)의 대형화와 자기 디스크에 대한 기술 발전
등으로 처리속도나 저장용량 등의 성능이 급속히 향상되고 [SSD](SSD.md)까지 널리 보급되어가는 오늘날에는 중요성이 다소
떨어졌다.

  

[[edit](http://rigvedawiki.net/r1/wiki.php/%EB%94%94%EC%8A%A4%ED%81%AC%20%EC%A
1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C?action=edit&section=2)]

## 2. 원리와 하는 이유 ¶

사실 디스크의 원리가 이정도로 간단하진 않은데, 대략 아래정도로 이해하면 된다.  
□□□□□□□□□□□□□□□  
텅 빈 하드디스크가 있다. 네모칸 하나가 1MB라 가정한다.

  

■■■■■■■■■■□□□□□  
4개의 파일이 각각 이렇게 들어있다고 치자. 그런데 여기서 파란색 파일을 지운다고 하면

  

■■■□□□□■■■□□□□□  
이런 모양새가 된다.

  

여기서 2MB파일하나, 3MB파일 하나, 2MB파일을 저장해야 한다 치면

  

■■■■■■■■■■■■■□□  
남은공간이 4MB밖에 없어 2MB짜리 하나는잘 저장 되었지만 3MB는 파편화가 된 것을 볼 수 있다.마지막 2MB는 별 문제 없이 저장
되었다.

  

그런데 여기서 또 두 3MB 파일을 지우고 8MB파일을 만든다면

  

□□□■■□□■■■□■■□□ 이런 상태가 되서  
■■■■■■■■■■■■■■■이처럼 4개로 파편화가 된다.

  

결과적으로 파일마다 액세스를 해야하는 횟수가 많아져서 컴퓨터가 느려지는 것. 5개의 파일을 쓰는데 필요한 액세스 수가 3회나 더 늘었다.
이걸 디스크 조각 모음을 하면

  

■■■■■■■■■■■■■■■

  

이렇게 모여서 액세스 5회로 끝나게 된다.

[[edit](http://rigvedawiki.net/r1/wiki.php/%EB%94%94%EC%8A%A4%ED%81%AC%20%EC%A
1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C?action=edit&section=3)]

## 3. 특징 ¶

  

많은 데이터를 불러올 때 속도 향상과 하드디스크의 수명도 늘릴 수 있다. 읽기 작업시 발생하는 소음도 크게 줄어든다.

  

2GB짜리 영화가 수십만 조각으로 분산되어 있다고 해보자. 그 조각 하나마다 1개의 클러스터를 차지하므로 디스크 용량이 그만큼 낭비되는데,
이걸 조각모음하면 낭비되는 용량이 최소화된다. 심지어 용량이 기가 단위로 늘어났다는 사례도 있다. 자신의 컴퓨터가 그렇게 되었다면 평소
관리에 소홀했다는 뜻이니 꾸준히 관리하자.

  

파편화 현상은 [프루나](%ED%94%84%EB%A3%A8%EB%82%98.md) 등의 [P2P](P2P.md) 공유 프로그램
사용 시 특히 심하게 나타난다. 공유 파일을 하드디스크에 내려받는다면 3~4개월에 한 번 정도 조각모음을 하자. p2p 프로그램의 방식에
따라 편차가 있지만 보통 내려받는 전송속도와 리소스 점유율에서 상당한 이득을 볼 수 있다. 단 캐쉬파일이 깨질 가능성이 있으므로 너무 자주는
금물. P2P 프로그램이나 OS에서 sparse 파일 모드를 지원하지 않는다면 해당 파일 용량을 미리 할당하고 시작하면 깨짐 현상을 최소화할
수 있다.

  

조각모음을 자주하면 하드디스크 수명이 줄어든다는 속설이 있지만 이는 낭설이다. 데이터가 연속으로 배치되어 각종 데이터를 읽어들이는데 헤드가
이동하는 거리가 대폭 줄어드므로 적절하게 이용하면 수명이 늘어난다. 조각모음 과정에서 디스크에 가해지는 부하는 평소 같은 양의 데이터를 읽을
때보다 3~5배 정도에 달한다. 그러나 파편화가 심각한 파일은 평소에 자주 읽고 쓰는 가능성이 크다는 뜻이며, 이는 가능한 자주 조각모음을
해서 부하를 줄이는 편이 좋다는 의미이다. 조각모음 유틸리티는 파편화된 파일만 골라서 해결하므로 자주 실행해도 이상이 생길 일은 없다.
그렇지만 너무 자주하면 번거롭고, 성능 향상도 미미하니 일주일이나 한달에 한 번 정도면 충분하다.

  

디스크 조각모음과 하드디스크 수명 문제에 대한 오해는 이렇게 만들어졌다고 추측된다. HDD는 기계적인 동작요소가 많고, 이러한 기계 장치는
장시간 무리한 움직임을 가하면 문제가 생기기 마련이다. 가령 자동차에 과속, 과적을 가끔씩, 짧게 하면 문제가 덜 생긴다. 그러나 과속,
과적을 한 번에 긴 시간에 거쳐서 하면 퍼질 가능성이 더 높을 것이다. HDD도 다르지 않다. 파편화가 심각하게 진행된 상황에서 조각모음을
하면, 무리한 움직임이 누적되어 굉음을 내다가 심하면 요단강을 건너기도 하는 것이다. 따라서 파편화가 어느 이상 진행되었을 때 한 번에
하기보다는, 자주 해주는 편이 좋다.

[[edit](http://rigvedawiki.net/r1/wiki.php/%EB%94%94%EC%8A%A4%ED%81%AC%20%EC%A
1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C?action=edit&section=4)]

## 4. 유의점 ¶

물리적 시간 소요가 발생하지 않는 플래시 메모리형 저장매체는 **사용하지 않기를 권한다**.

  

플래시 메모리 기반 매체 역시 파편화는 발생한다. HDD는 기계적인 방식을 사용하여 파일에 접근하므로, 파편화가 심할수록 속도가 느려진다.
하지만 플래시 메모리 매체는 파일에 접근할 때 전자적인 방식을 사용한다. 따라서 시간이 매우 짧아 조각모음을 하든말든 속도 차이가 거의
없다. 이 차이는 파일이 저장된 위치를 순간적으로 찾아내는 성능지표인 랜덤 억세스를 보면 알 수 있다. 하드디스크는 보통 9~20ms,
USB 메모리는 1ms 미만, SSD는 아무리 느려도 0.1ms 이하이다. 즉 흩어진 조각이 10개일 경우 그것들을 모두 읽어들이는 데
필요한 시간이 하드디스크는 아무리 빨라야 최소 90ms가 걸리는 반면 SSD는 10개든 100개든 1000개든 간에 별 차이 없이 1ms
안에 해치울 수 있다. 100%에 가까운 파편화 상태에도 성능 저하는 10% 안팍이라고 한다.

  

플래시 메모리에는 재기록 수명이 있는데 조각모음은 **수명을 감소**시킨다. 조각모음은 전체 공간을 썼다 지웠다 하면서 재기록회수를 많이
소모하기 때문이다. 그래서 [윈도우 7](%EC%9C%88%EB%8F%84%EC%9A%B0%207.md)에서는 클린 설치시 SSD가
있다면 디스크 조각모음이 작동하지 않는다.

  

조각모음이 플래시 메모리 매체에 치명적인 타격을 가한다는 듯이 알려지기도 했다. 그러나 정확한 사실은 아니다. 조각모음이 일반적인 때보다
많은 파일 쓰기·읽기 동작을 하지만, 일반적인 사용보다 3~5배 가량의 부하가 가해질 뿐이다. 가령 100기가를 사용 중인 ssd가 50%
파편화 됐다고 해보자. 이를 조각모음하면 간단히 계산해서 200기가 정도 사용수명이 줄어든다는 뜻이다. 이는 그리 많은 사용량이 아니며, 몇
개월에 한 번하는 정도라면 심각하게 망가지진 않는다. 하지만 실익이 거의 없고, 미세하나마 지속적인 데미지를 입으므로 ** 굳이 할 필요가
없다**라고 알면 된다. 뭘 모르고 조각모음 했다가 소중한 SSD에 기스냈다고 가슴 아픈 사람이 있다면, 걱정은 놓고 마음 편히
가지도록하자. 만약 파편화가 70% 이상 되어 누수용량이 크다면 조각모음을 하는 편이 좋다. 그래봤자 2년에 한 번 정도면 충분할 것이다.
<del>그러니까 싸구려 저가SSD 말고 믿을 수 있는 제품(TBW가 높은 제품)을 사용하게 되면 걱정없다. 근데 SSD면 굳이 조각모음 할
필요성을 못느낀다. 조각모음 하더라도 걱정할 필요가 없다. 어차피 한계용량을 다 못쓰고 그 전에 바꿀테니까.</del>

  

윈도우 8.1 에서는 내장된 조각모음 프로그램이 SSD를 인식한다. '조각모음' 이 아니라 '드라이브 최적화 및 조각모음' 으로 바뀐
이름에서 기능의 차이를 추측할 수 있다. 이 프로그램 첫 화면 미디어 유형에서 'SSD(솔리드 스테이트 드라이브)' 라고 뜬다. 이때 최적화
버튼을 누르면 HDD 식의 조각모음이 아니라, MFT를 최적화 하고 TRIM 작업을 한다고 보인다.

  

작업 관리자에서는 SSD가 논다며 활성시간이 0~5% 이내로 뜨겠지만, 막상 HDD작동등(SSD 작동등이라 해야 옳을 것 같은데...)은
길게(2~3초 동안) 빛이 날 것이다.  

[PMP](PMP.md)나 [MP3](MP3.md) 플레이어는 컨텐츠를 자주 바꾸고 꽉 채워다니지 않는 한 파일이 잘 조각나지도
않는다. 신경이 쓰인다면 백업 후 [포맷](%ED%8F%AC%EB%A7%B7.md)한 후에 다시 복사해 넣도록 하자. 모든 파일이 각각
한 덩이씩 똑바로 들어가서 조각모음을 한 것과 마찬가지가 되며, 전송 인터페이스가 [USB](USB.md) 2.0 미만일 경우라면
이쪽이 차라리 빠르다. <del>하지만 복사 인스턴스를 동시에 여러 개 돌리면 도로아미타불.</del> 실익은 없으니 자기만족 이상의 의미는
없다는 점을 명심하자.

  

물론 PMP 중 하드디스크를 사용하는 종류는 디스크 조각모음을 해도 된다.

  

[[edit](http://rigvedawiki.net/r1/wiki.php/%EB%94%94%EC%8A%A4%ED%81%AC%20%EC%A
1%B0%EA%B0%81%EB%AA%A8%EC%9D%8C?action=edit&section=5)]

## 5. 기타 ¶

현재는 [마이크로소프트](%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%86%8C%ED%94%84%ED%8A%B8.md)에게 인수된 Sysinternals가 제작한 Contig를 이용하면 고속/고효율로 조각모음을 할 수 있다. 단 커맨드 라인
툴이므로 GUI 프론트엔드인 'Power Defragmenter'를 통해 사용하는 편이 손발이 편하다.
[링크](http://technet.microsoft.com/en-us/sysinternals/bb842062)

  

[Windows](Windows.md)에서 페이징(가상메모리) 파일과 레지스트리 하이브는 조각모음을 시켜주면 큰 성능향상이 보일 때도
있다. 단 이것은 일반적인 조각 모음 소프트웨어로는 불가능하고, 상기한 Sysinternals의 PageDefrag, 혹은 Elcor의
Registry Defragmentation 등의 프로그램을 사용해야 한다. 그리고 레지스트리의 경우 데이터의 물리적 조각모음보다는 문맥적
조각모음이라고 하는 편이 보다 정확할 것이다. [유닉스](%EC%9C%A0%EB%8B%89%EC%8A%A4.md)/[리눅스](/wiki
/%EB%A6%AC%EB%88%85%EC%8A%A4) 계열은 가상메모리를 swap 파티션에서 해결하고 레지스트리 개념이 애초부터 없으니 상관
없다.

  

[Mac OS X](Mac%20OS%20X.md)에는 디스크 조각모음 유틸리티가 없는 듯이 보이지만, 사실은 20MB 미만의 파일에
한해 OS가 알아서 백그라운드에서 단편화를 제거한다. 그보다 큰 파일은 디스크에 기록할 때 가장 큰 공간에 먼저 기록하는 방식으로 파편화가
생기지 않도록 한다. 그러나 대용량 파일의 읽고 쓰기가 잦거나 하드 디스크 공간이 부족하면 단편화를 피할 수 없다. 애플에서는 전자의 경우
서드파티의 유틸리티를 사용할 수 있으며, 후자의 경우 하드디스크를 좀 더 큰 용량으로 업그레이드하라고 권장한다. 서드파티의 유틸리티를
사용하지 않는다면 포맷하고 타임 머신에 백업을 다시 불러들여오면 된다.(...)

  

윈도우즈 내장 디스크 조각모음 프로그램의 시초는 디스크키퍼 코퍼레이션에서 만들었다. 디스크 최적화 유틸리티 전문업체로 마이크로소프트에서
하청을 받은 것이다. 원래는 무지막지하게 비싼 가격에 디스크키퍼라는 프로그램을 팔았는데, 콘두시브 테크놀로지가 인수하면서 개인용 제품의
가격이 매우 저렴해졌다. 디스크키퍼는 빠른 하드디스크 조각모음 속도와 조각 발생을 예방하는(!) 기능을 갖춰 조각모음계의 끝판왕 유틸리티로
유명하다. SSD 트림까지 지원하는 최적화 기술을 제공함으로써 디스크키퍼 하나로 하드디스크와 SSD의 통합관리할 수 있다.

  

